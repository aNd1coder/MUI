function ScrollImage(f,b,a){function c(){document.writeln("<style type='text/css'>                                                                                         ");document.writeln("body,div,ul,li,p{margin:0;padding:0;}                                                                           ");document.writeln(".mtt-body{position: absolute;top: 100px;left: 100px;}                                                           ");document.writeln(".mtt-mask{width:522px;height:228px;overflow: hidden;position: relative;border: 1px solid red;}                  ");document.writeln(".mtt-imgs{width:100%;height:100%;position: absolute;top:0px;left: 0px;}                                         ");document.writeln(".mtt-mask ul,.mtt-mask li{list-style: none;list-style-type: none;}                                              ");document.writeln(".mtt-imgs li{width:522px;height:228px;}                                                                         ");document.writeln(".mtt-desps{position: absolute;top: 207px;left: 0px;height:20px;width:100%;}               					  ");document.writeln(".mtt-list-desps{width:100%;height:100%;clear: both;}                                                            ");document.writeln(".mtt-list-desps li{width:130px;height:20px;float: left;opacity: 0.5;filter:alpha(opacity=50);background: #555;cursor:pointer;}");document.writeln(".mtt-list-desps p{text-align: center;color:#fff;height:20px;}                                                   ");document.writeln(".mtt-list-desps p.mtt-hover{text-align: center;color:#000;background:#f00;}                                     ");document.writeln("</style>                                                                                                        ");document.writeln("<div class='mtt-body'>                                                                                          ");document.writeln("	<div class='mtt-mask'>                                                                                        ");document.writeln("		<ul class='mtt-imgs'>                                                                                     ");document.writeln("		</ul>                                                                                                     ");document.writeln("		<div class='mtt-desps'>                                                                                   ");document.writeln("			<ul class='mtt-list-desps'>                                                                           ");document.writeln("			</ul>                                                                                                 ");document.writeln("		</div>                                                                                                    ");document.writeln("	</div>                                                                                                        ");document.writeln("</div>                                                                                                          ")}function d(k,s,r){var o=/\.([a-zA-Z_0-9\-]*)[|\s]*([a-zA-Z]+|)/.exec(k);if(o&&o[1]){var s=s||"*";var r=r||document;var g=(s=="*"&&r.all)?r.all:r.getElementsByTagName(s);var l=[];var p;var h=g.length;for(var n=0;n<h;n++){p=g[n];if(o&&o[1]&&(o[1]==p.className||(p.className.indexOf(o[1])!=-1))){if(o[2]){var q=p.childNodes;for(var m=0,h=q.length;m<h;m++){if(q[m].nodeType===1){l.push(q[m])}}}else{l.push(p)}}}return l}}function e(k,m){var h="",l="";if(!f[0]&&!b[0]){throw new Error("参数不正确！")}if(typeof f=="string"){f=f.split(",")}if(typeof b=="string"){b=b.split(",")}if(typeof a=="string"){b=b.split(",")}if(f.length!=b.length){throw new Error("图片数量必须跟图片描述比例一样！")}if(a.length!=b.length){throw new Error("链接数量必须跟图片描述比例一样！")}for(var g=f.length,j=0;j<g;j++){h+="<li><a href='"+a[j]+"'><img src='"+f[j]+"'/></a></li>";if(j==0){l+="<li><p class='mtt-p mtt-hover'>"+b[j]+"</p></li>"}else{l+="<li><p class='mtt-p'>"+b[j]+"</p></li>"}}k.innerHTML=h;m.innerHTML=l}c();this.ul=d(".mtt-imgs")[0];this.desp=d(".mtt-list-desps")[0];e(this.ul,this.desp);this.lis=d(".mtt-list-desps li");this.ps=d(".mtt-p");this.length=d(".mtt-imgs li").length;this.ul.style.top="0px";this.count=0;this.calcount=0;this.pre=this.ps[0]}ScrollImage.prototype=(function(){function d(f){var h=this,e=1;if(!!this.pre){this.pre.className=""}this.ps[f].className="mtt-hover";this.pre=this.ps[f];var g=ScrollImage.clock_run(function(){var j=parseInt(h.ul.style.top);if(j<=((h.count*-ScrollImage.IMG_HEIGHT)+ScrollImage.START_HEIGHT)){j-=Math.sqrt(e++)*ScrollImage.MOVE_SLOW_PARAM;if(j<=(h.count*-ScrollImage.IMG_HEIGHT)){ScrollImage.clock_pause(g);h.ul.style.top=h.count*-ScrollImage.IMG_HEIGHT+"px";h.calcount=e;return}}else{if(h.count<h.length){j-=e++*ScrollImage.MOVE_SPEED_PARAM}else{if(h.count==h.length){var i=ScrollImage.IMG_HEIGHT*h.length/h.calcount;if(j>=-ScrollImage.START_HEIGHT){j+=Math.sqrt(e++)*ScrollImage.MOVE_SLOW_PARAM;if(j>=0){ScrollImage.clock_pause(g);h.ul.style.top=0+"px";h.count=0;return}}else{j+=i;e++}}}}h.ul.style.top=j+"px"},ScrollImage.MOVE_TIME,this.ul);this.count=(this.count==this.length)?0:this.count=this.count+1;return this}function c(i){var m=i*ScrollImage.IMG_HEIGHT;var l=parseInt(this.ul.style.top);var h=this,f=(-m)-l,e=0,j=f;this.count=parseInt(i);if(!!this.pre){this.pre.className=""}this.ps[i].className="mtt-hover";this.pre=this.ps[i];var n=ScrollImage.clock_run(function(){var k=j/(h.calcount=(h.calcount==0?19:h.calcount));l=parseInt(h.ul.style.top);f=(-m)-l;if(Math.abs(f)<=ScrollImage.START_HEIGHT){if(k<0){l+=-Math.sqrt(e++)*ScrollImage.MOVE_SLOW_PARAM}else{l+=Math.sqrt(e++)*ScrollImage.MOVE_SLOW_PARAM}if(k<0){if(l<-m){g(h,n)}}else{if(l>=-m){g(h,n)}}}else{l+=(k>0?(e++*ScrollImage.MOVE_SPEED_PARAM):-(e++*ScrollImage.MOVE_SPEED_PARAM))}h.ul.style.top=l+"px"},ScrollImage.MOVE_TIME);function g(o,k){ScrollImage.clock_pause(k);o.ul.style.top=(-m)+"px";return}}function a(){var e=this;var f=[];ScrollImage.each(this.lis,function(g,h){document.addEvent(function(){var i=setTimeout(function(){e.move(g)},ScrollImage.TIME);f.push({time:i,obj:this})},"mouseover",h)});ScrollImage.each(this.lis,function(g,h){document.addEvent(function(){var i=f.pop();if(!!i){clearTimeout(i.time)}},"mouseout",h)})}function b(){var h=ScrollImage.EVENT_REF;var g=h.length;for(var f=0;f<g;f++){document.removeEvent(h[f]["event"],h[f]["eventType"],h[f]["obj"])}h.length=0}return{init:function(){var e=0,f=this;this.size=ScrollImage.clock_run(function(){if(e==f.length){e=0}d.apply(this,[e]);e++},ScrollImage.TIMES,this);a.apply(this);return this},move:function(e){ScrollImage.clock_pause(this.size);b.apply(this);c.apply(this,[e]);this.init()}}})();ScrollImage.each=function(a,f,b){for(var c=0,d=a.length,e=a[0];c<d;c++){e=a[c];if(b){f.apply(e,b)}else{f.call(e,c,e)}}};if(!document.addEvent){document.addEvent=function(d,a,c){c=c||window;var b=function(){d.apply(c)};if(document.addEventListener){c.addEventListener(a,b,false)}else{if(document.attachEvent){c.attachEvent("on"+a,b)}else{c["on"+a]=b}}ScrollImage.EVENT_REF[ScrollImage.EVENT_REF.length]={eventType:a,event:b,obj:c}}}if(!document.removeEvent){document.removeEvent=function(c,a,b){b=b||window;if(document.removeEventListener){b.removeEventListener(a,c,false)}else{if(document.detachEvent){b.detachEvent("on"+a,c)}else{b["on"+a]=null}}}}ScrollImage.clock_run=function(e,d,c,a){c=c||window;var b=ScrollImage.clocks.length;ScrollImage.clocks[b]=setInterval(function(){if(a){e.apply(c,a)}else{e.apply(c)}},d);return b};ScrollImage.clock_pause=function(a){clearInterval(ScrollImage.clocks[a]);ScrollImage.clocks[a]=null};ScrollImage.clocks=[];ScrollImage.IMG_HEIGHT=229;ScrollImage.START_HEIGHT=60;ScrollImage.MOVE_SLOW_PARAM=1.5;ScrollImage.MOVE_SPEED_PARAM=5;ScrollImage.MOVE_TIME=25;ScrollImage.EVENT_REF=[];ScrollImage.TIME=500;ScrollImage.TIMES=5000;var si=new ScrollImage(["http://static.mttang.com/fa/image/43f45d44-aa0c-4960-a3d1-9006f82df981.jpg","http://static.mttang.com/fa/image/7c7da4f5-6d4a-4393-af29-622e2642994c.jpg","http://static.mttang.com/fa/image/a848f1ff-99b7-4841-a238-f74264562c09.jpg","http://static.mttang.com/fa/image/97a5133e-bebf-4630-9201-38ef6a2f6eca.jpg"],["zhangwang1","zhangwang2","zhangwang3","zhangwang4"],["http://www.baidu.com","http://www.qq.com","http://www.google.com","http://www.yahoo.com"]);si.init();