var mulscrollimage=(function(a){return function(h,d){var c,e,g=1,f,i,k={},b={};var j={checkAndSplit:function(){var l={top:"top",bottom:"top",left:"left",right:"left"};b.direction=h.direction?h.direction:"left";b.callback=h.callback?h.callback:j.computeScroll();b.result=l[b.direction];b.per=h.per?h.per:100;b.move=h.move?h.move:1;b.size=h.size?h.size:1;b.speed=h.speed?h.speed:100;b.auto=h.auto?h.auto:5000;b.selector=h.selector?h.selector:"#mt_scrollPic ";b.num=a(b.selector+" li").length;b.btnNext=h.btnNext;b.btnPrev=h.btnPrev;k.width=parseInt(a(b.selector).css("width"));k.height=parseInt(a(b.selector).css("height"));if(!k&&!b){throw new error("参数不正.")}if(!b.num||b.num===0){throw new error("图片数量不正确.")}if(!b.move||b.move===0){throw new error("每次移动图片数量不正确.")}if(Math.floor(b.num/b.move)<(b.num/b.move)&&Math.ceil(b.num/b.move)>(b.num/b.move)){throw new error("图片总量与移动图片数量不正对称,出现空白.")}if("top"===b.direction||"bottom"===b.direction){if(b.per*b.size!=k.height){throw new error("遮罩层长度与根据单位窗口长度计算出来的长度不对应.")}}else{if("left"===b.direction||"right"===b.direction){if(b.per*b.size!=k.width){throw new error("遮罩层长度与根据单位窗口长度计算出来的长度不对应.")}}}},initHTMl:function(){try{d&&d.before&&d.before()}catch(l){throw new error("callobj.before函数运行异常.")}j.checkAndSplit(h);a(b.selector+" ul").append(a(b.selector+" li:lt("+b.size+")").clone(true));try{d&&d.after&&d.after()}catch(l){throw new error("callobj.after函数运行异常.")}f=a(b.selector+" ul");i=a(b.selector+" li");return this},computeScroll:function(m){var l={left:function(n){parseInt(n.css("left"))-50},right:function(){parseInt(node.css("left"))+50},top:function(){parseInt(node.css("top"))-50},bottom:function(){parseInt(node.css("top"))+50}};b.callback=l[m||b.direction];return this},getReverseDirection:function(m){var l={left:"right",right:"left",top:"bottom",bottom:"top"};b.direction=l[m||b.direction];return this},setConfig:function(l){if("top"===b.direction||"bottom"===b.direction){f.css({width:l.width,height:32678});if("top"===b.direction){f.css({top:0})}else{f.css({top:-b.per*b.num})}}else{if("left"===b.direction||"right"===b.direction){f.css({width:32678,height:l.height});if("left"===b.direction){f.css({left:0})}else{f.css({left:-b.per*b.num})}}}i.hover(function(){clearTimeout(e);clearInterval(c);c=null;e=null},function(){e=setTimeout(j.running,500)});if(b.btnNext&&b.btnPrev){a(b.btnNext).click(function(){var m=b.direction;if(b.direction==="left"||b.direction==="top"){j.running()}else{j.getReverseDirection().computeScroll().running();j.clear();j.getReverseDirection(m).computeScroll().running()}});a(b.btnPrev).click(function(){var m=b.direction;if(b.direction==="left"||b.direction==="top"){j.getReverseDirection().computeScroll().running();j.clear();j.getReverseDirection(m).computeScroll().running()}else{j.running()}})}return this},compute:function(){f.css(b.result,b.callback(f,g));if(b.direction==="left"||b.direction==="top"){if(Math.abs(parseInt(f.css(b.result)))>b.per*g*b.move){f.css(b.result,-b.per*g*b.move);if(g===Math.floor(b.num/b.move)){f.css(b.result,0);g=1}else{g++}j.clearAndRestart()}}else{if(b.direction==="right"||b.direction==="bottom"){if(parseInt(f.css(b.result))>0||Math.abs(parseInt(f.css(b.result)))<b.per*(b.num-(g*b.move))){f.css(b.result,-b.per*(b.num-(g*b.move)));if(g===Math.floor(b.num/b.move)){f.css(b.result,-b.per*b.num);g=1}else{g++}j.clearAndRestart()}}}},clearAndRestart:function(){clearInterval(c);c=null;e=setTimeout(j.running,b.auto);try{d&&d.complete&&d.complete(f,g)}catch(l){throw new error("callobj.complete函数运行异常.")}},clear:function(){clearInterval(c);clearTimeout(e);c=null;e=null;return this},running:function(){c=setInterval(function(){j.compute()},b.speed);return this},init:function(){j.initHTMl().setConfig(k).running()}};j.init()}})(jQuery);