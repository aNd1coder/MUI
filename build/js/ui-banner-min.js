var FlexiBanner={};(function(p){var k=Array.slice||(function(){var a=Array.prototype.slice;return function(t){return a.apply(t,a.call(arguments,1))}})(),l=function(a){var t=typeof a;if(t==="object"){if(a){if(typeof a.length==="number"){t="array"}}else{t="null"}}return t},d=function(a,t){return !i(t,function(x,w,u){if(a[w]!==x){return u}})},e=function(u,t){return d(u,t)&&d(t,u)},h=function(t){var a=true;c(t,function(x,w,u){a=false;return u});return a},c=(function(){var t={},v=function(z,y,A){for(var x=0,w=z.length;x<w;x++){if(y.call(A,z[x],x,t)==t){return x}}return -1},u={string:function(x,w,y){return v(x.split(""),w,y)},array:v,number:function(y,x,z){for(var w=0;w<y;w++){x.call(z,w,w)}},object:function(y,x,z){for(var w in y){if(y.hasOwnProperty(w)){if(x.call(z,y[w],w,t)==t){return w}}}return -1}},a=function(w){return u[l(w)]};return function(x,w,y){return a(x)(x,w,y||x)}})(),i=function(u,t,v){var a=c(u,function(y,x,w){if(t.apply(v,arguments)===true){return w}});return a==-1?null:u[a]},f=function(u,t,v){var a=[];c(u,function(w){if(t.apply(v,arguments)===true){a.push(w)}});return a},q=function(u,t,w,v){var a;if(v){a={};c(u,function(y,x){a[x]=t.apply(w,arguments)})}else{a=[];c(u,function(){a.push(t.apply(w,arguments))})}return a},s=function(w,v,u,a,x){var t=k(arguments,2);c(w,function(z,y){z[v].apply(z,t)})},j=function(a){if(a==null){return a}if(typeof a.length=="number"&&typeof a!="string"){return q(a,j)}else{if(typeof a=="object"){return q(a,j,null,true)}}return a},b=function(v){if(!v){v={}}for(var t=1;t<arguments.length;t++){var u=arguments[t];if(u){for(var a in u){if(v[a]&&typeof v[a]=="object"&&typeof u[a]=="object"){g(v[a],u[a])}else{v[a]=j(u[a])}}}}return v},g=function(v){if(!v){v={}}for(var t=1;t<arguments.length;t++){var u=arguments[t];if(u){for(var a in u){v[a]=u[a]}}}return v},o=function(v){if(!v){v={}}for(var t=1;t<arguments.length;t++){var u=arguments[t];if(u){for(var a in u){if(v[a]===undefined){v[a]=u[a]}}}}return v},n=(function(){var a=1;return function(){return"auto_gen_"+a++}})(),m={proto:(function(){var a=function(t,u){return this.prototype[u].apply(t,k(arguments,2))};return function(t){t.proto=a}})(),create:function(v,w){var u=function(){if(this.init){this.init.apply(this,arguments)}};if(w){var t=function(){};t.prototype=w.prototype;u.prototype=new t()}var a=k(arguments,2);a.unshift(u.prototype,v);g.apply(window,a);return u}},r=function(w,u,t,a){var v=a?encodeURIComponent:function(x){return x};return function(x){return q(x,function(z,y){if(y!=null){return y+w+v(z)}}).join(u)+(t?u:"")}};g(p,{generateId:n,slice:k,getType:l,equals:e,isEmpty:h,each:c,map:q,find:i,filter:f,mix:g,mixdeep:b,mixif:o,buffer:function(t,a){var u;return function(){if(u){clearTimeout(u)}var v=arguments;u=setTimeout(function(){t.apply(window,v)},a||100)}},Class:m,format:function(u,t,a){return u.replace(/\{([^}]*)\}/g,(typeof t=="object")?function(v,x){var w=t[x];return w==null&&a?v:w}:t)},getObjectToStringFn:r,serializeStyles:r(":",";",true,false),serializeAttrs:r("="," ",true,false),serializeQuery:r("=","&",false,true)})})(FlexiBanner);(function(s){var l='<{tag} {attrs}style="{styles}">{inner}</{tag}>',g=s.each,o={},e={HYPHEN:/(-[a-z])/i,ROOT_TAG:/^body|html$/i},p=(function(){var v={ie:0,opera:0,gecko:0,webkit:0,mobile:null};var u=navigator.userAgent,a;if((/KHTML/).test(u)){v.webkit=1}a=u.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){v.webkit=parseFloat(a[1]);if(/ Mobile\//.test(u)){v.mobile="Apple"}else{a=u.match(/NokiaN[^\/]*/);if(a){v.mobile=a[0]}}}if(!v.webkit){a=u.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){v.opera=parseFloat(a[1]);a=u.match(/Opera Mini[^;]*/);if(a){v.mobile=a[0]}}else{a=u.match(/MSIE\s([^;]*)/);if(a&&a[1]){v.ie=parseFloat(a[1])}else{a=u.match(/Gecko\/([^\s]*)/);if(a){v.gecko=1;a=u.match(/rv:([^\s\)]*)/);if(a&&a[1]){v.gecko=parseFloat(a[1])}}}}}return v})();var r=function(v,a){for(var u=v;u;u=u[a]){if(u.nodeType==1){return u}}},t=function(w,v,a,u){return s.format(l,{tag:a||"div",attrs:s.serializeAttrs(v||{}),styles:s.serializeStyles(w),inner:u||""})},m=function(a){if(!e.HYPHEN.test(a)){return a}if(o[a]){return o[a]}var u=a;while(e.HYPHEN.exec(u)){u=u.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase())}o[a]=u;return u},k=(function(){if(document.defaultView&&document.defaultView.getComputedStyle){return function(a,w){var v=null;if(w=="float"){w="cssFloat"}var u=document.defaultView.getComputedStyle(a,"");if(u){v=u[m(w)]}return a.style[w]||v}}else{if(document.documentElement.currentStyle&&p.ie){return function(a,v){switch(m(v)){case"opacity":var x=100;try{x=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(w){try{x=a.filters("alpha").opacity}catch(w){}}return x/100;case"float":v="styleFloat";default:var u=a.currentStyle?a.currentStyle[v]:null;return(a.style[v]||u)}}}else{return function(a,u){return a.style[u]}}}})(),i=(function(){var a=/left|top|right|bottom|width|height/;var u=function(x,w){if(a.test(x)&&typeof w=="number"){w=w+"px"}return w};if(p.ie){return function(v,w,x){w=m(w);switch(w){case"opacity":v.style.filter="alpha(opacity="+x*100+")";if(!v.currentStyle||!v.currentStyle.hasLayout){v.style.zoom=1}break;case"float":w="styleFloat";default:v.style[w]=u(w,x)}}}else{return function(v,w,x){w=m(w);if(w=="float"){w="cssFloat"}v.style[w]=u(w,x)}}})(),c=function(a){a=a||document;return Math.max(a.documentElement.scrollLeft,a.body.scrollLeft)},h=function(a){a=a||document;return Math.max(a.documentElement.scrollTop,a.body.scrollTop)},b=function(){var u=(document.compatMode!="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight;var a=Math.max(u,n());return a},d=function(){var u=(document.compatMode!="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth;var a=Math.max(u,f());return a},n=function(){var a=self.innerHeight;var u=document.compatMode;if((u||p.ie)&&!p.opera){a=(u=="CSS1Compat")?document.documentElement.clientHeight:document.body.clientHeight}return a},f=function(){var a=self.innerWidth;var u=document.compatMode;if(u||p.ie){a=(u=="CSS1Compat")?document.documentElement.clientWidth:document.body.clientWidth}return a},q=function(v){var w=[v.offsetLeft,v.offsetTop];var u=v.offsetParent;var a=(p.webkit&&k(v,"position")=="absolute"&&v.offsetParent==v.ownerDocument.body);if(u!=v){while(u){w[0]+=u.offsetLeft;w[1]+=u.offsetTop;if(!a&&p.webkit&&k(u,"position")=="absolute"){a=true}u=u.offsetParent}}if(a){w[0]-=v.ownerDocument.body.offsetLeft;w[1]-=v.ownerDocument.body.offsetTop}u=v.parentNode;while(u.tagName&&!e.ROOT_TAG.test(u.tagName)){if(k(u,"display").search(/^inline|table-row.*$/i)){w[0]-=u.scrollLeft;w[1]-=u.scrollTop}u=u.parentNode}return w},j=function(a){if(typeof a=="string"){return document.getElementById(a)}return a};s.DomUtil={ua:p,get:j,buildHTML:t,createElement:function(a){if(typeof a!="string"){a=t.apply(window,arguments)}var u=document.createElement("div");u.innerHTML=a;return u.firstChild},next:function(a){return r(a,"nextSibling")},pre:function(a){return r(a,"previousSibling")},children:function(v){var a=[];for(var u=v.firstChild;u;u=u.nextSibling){if(u.nodeType==1){a.push(u)}}return a},setStyle:function(w,u,a){w=j(w);if(typeof u=="object"){g(u,function(x,v){i(w,v,x)})}else{i(w,u,a)}},getStyle:function(u,a){return k(j(u),a)},getXY:function(a){return q(j(a))},hide:function(a){i(a,"display","none")},show:function(a){i(a,"display","")},getDocumentHeight:b,getDocumentWidth:d,getViewportHeight:n,getViewportWidth:f,getDocumentScrollTop:h,getDocumentScrollLeft:c,absolutize:function(u,v,a){u.className="absolute";s.DomUtil.setStyle(u,{position:"absolute",left:"-999px",top:"-9999px",zIndex:v});if(a){document.body.insertBefore(u,document.body.firstChild)}},align:function(u,w,z){u=j(u);w=j(w);var A={},v=z.split("-"),C=q(u),a=C[0],B=C[1];g({anchor:u,brick:w},function(y,x){var D=A[x]={};g(["Width","Height"],function(E){D[E.toLowerCase()]=y["offset"+E]})});g(v[0].split(""),function(x){switch(x){case"r":a+=A.anchor.width;break;case"b":B+=A.anchor.height;break;default:break}});g(v[1].split(""),function(x){switch(x){case"r":a-=A.brick.width;break;case"b":B-=A.brick.height;break;default:break}});w.style.left=a+"px";w.style.top=B+"px"}}})(FlexiBanner);(function(c){var d=c.DomUtil.get,b=c.DomEventUtil={};if(document.addEventListener){b.on=function(f,e,a){d(f).addEventListener(e,a,false);return a};b.un=function(f,e,a){d(f).removeEventListener(e,a,false)};b.stopPropagation=function(a){a.stopPropagation()};b.preventDefault=function(a){a.preventDefault()};b.getTarget=function(a){return a.target}}else{b.on=function(f,e,a){f=d(f);var g=function(){a.call(f,window.event)};f.attachEvent("on"+e,g);return g};b.un=function(e,a,f){d(e).detachEvent("on"+a,f)};b.stopPropagation=function(a){a.cancelBubble=true};b.preventDefault=function(a){a.returnValue=false};b.getTarget=function(a){return a.srcElement}}b.stop=function(a){b.stopPropagation(a);b.preventDefault(a)}})(FlexiBanner);(function(b){b.Cookie={set:function(c,d,a){var e=c+"="+d;if(a){if(a.expires){e+="; expires="+(new Date((new Date()).getTime()+86400000*a.expires)).toGMTString()}if(a.path){e+="; path="+a.path}if(a.domain){e+="; domain="+a.domain}if(a.secure===true){e+="; secure"}}document.cookie=e},get:function(){var g=document.cookie;var e={};if(/[^=]+=[^=;]?(?:; [^=]+=[^=]?)?/.test(g)){var j=g.split(/;\s/g),h=null,f=null,c=null;for(var d=0,a=j.length;d<a;d++){c=j[d].match(/([^=]+)=/i);if(c instanceof Array){h=c[1];f=j[d].substring(c[1].length+1)}else{h=j[d];f=h}e[h]=f}}return e},remove:function(a,c){c=c||{};c.expires=-1;this.set(a,"",c)}}})(FlexiBanner);(function(b){var g=b.DomUtil,c=Date.now||function(){return new Date().getTime()},e={duration:1,transition:function(a){return a},callback:function(){}};var f=function(i,h,a){return(h-i)*a+i},d=function(a,i,h){b.each(h,function(l,j){if(i[j]==null){i[j]=parseInt(g.getStyle(a,j),10)}else{g.setStyle(a,j,i[j])}})};b.Anim=b.Class.create({init:function(h,a){this.el=g.get(h);this.config=b.mixif(a,e);this.chains=[]},morph:function(a){if(this.playing){this.chains.push(a)}else{this._morph(a);this.playing=true}return this},_morph:function(h){var p=h.from||{},q=h.to,k=h.config||{};b.mixif(k,this.config);var i=this.el,l=k.duration*1000,m=k.transition,j=c(),n=this;d(i,p,q);var r=function(o){b.each(q,function(t,s){g.setStyle(i,s,f(p[s],t,o))})};var a=setInterval(function(){var o=c();if(o<j+l){r(m((o-j)/l))}else{r(1);clearInterval(a);n._chain()}},20)},_chain:function(){if(this.chains.length){this._morph(this.chains.shift())}else{this.playing=false;this.config.callback()}}})})(FlexiBanner);var mutex_lock,mutex_unlock;(function(){var a=false;mutex_lock=function(){if(a){return -1}else{a=true;return 0}};mutex_unlock=function(){a=false;return 0}})();(function(r){var d=r.each,o=r.Class,n=r.DomUtil,m=n.ua,s=n.buildHTML,q={},p=r.Cookie.get(),j=parseInt(p.ad_play_index)||Math.floor(Math.random()*100),e="adlink";r.Cookie.set("ad_play_index",j+1,{expires:1});var b=function(a){(new Image()).src=a},i=function(a){return function(){if(arguments.length==0){return}var t=arguments[j%arguments.length];q[a.id]=l.create(t.display,{area_config:a,creativity_config:t})}};var f=function(t,u){var v={display:"block",cursor:"pointer",width:t.width+"px",height:t.height+"px"};var a=t.resource_url;if(k(a)=="png"&&m.ie!=0&&m.ie<7){v.filter=r.format("progid:DXImageTransform.Microsoft.AlphaImageLoader(src='{uri}')",a)}else{v["background-image"]=r.format("url({uri})",a)}u.innerHTML=s(v);u.firstChild.onclick=function(){window.open(t.link_to)}};var g=function(u,v){var w={quality:"high",allowscriptaccess:"always",wmode:"opaque",swliveconnect:true};if(u.params){r.mix(w,u.params)}var a=u.flashvars||{};if(u.link_to){a[e]=u.link_to}w.flashvars=r.serializeQuery(a);var t={};if(m.ie){t.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";w.movie=u.resource_url}else{w.type="application/x-shockwave-flash";t.data=u.resource_url}v.innerHTML=s({width:u.width+"px",height:u.height+"px"},t,"object",c(w))};var h='<param name="{name}" value="{value}"></param>';var c=function(a){return r.map(a,function(u,t){return r.format(h,{name:t,value:u})}).join("")};var k=function(t){var a=t.indexOf("?");return t.substring(t.lastIndexOf(".")+1,a==-1?t.length:a)};r.DisplayBase=o.create({init:function(a){r.mix(this,a)},getFodder:function(a){var t=this["creativity_config"]["fodder"];if(!a&&t.length==1){return t[0]}return t},getDisplayConfig:function(){return this["creativity_config"]["display_config"]},appendToPing:function(){var a=this.creativity_config;r.ping.append({loc:this.area_config.id,cid:a.cid,oid:a.oid});if(a.monitor_url){b(a.monitor_url)}},render:function(){this.preRender();this.doRender()},preRender:function(){},doRender:function(){}});r.PingDisplayBase=o.create({preRender:function(){this.appendToPing()}},r.DisplayBase);r.DisplayHelper={render:function(a,t,v){if(v){n.setStyle(t,{width:a.width,height:a.height})}if(a.type=="image"){f(a,t)}else{g(a,t);if(a.cover){if(n.getStyle(t,"position")=="static"){t.style.position="relative"}var u=document.createElement("div");u.className="absolute";n.setStyle(u,{position:"absolute",width:a.width+"px",height:a.height+"px",left:"0px",top:"0px",cursor:"pointer","background-color":"#fff",filter:"alpha(opacity=0)",opacity:0});u.onclick=function(){window.open(a.link_to)};t.appendChild(u)}}}};(function(){var a={};r.DisplayManager={create:function(u,t){if(typeof u=="string"){u=a[u]}if(u){return new u(t)}},reg:function(u,t){a[u]=t}}})();var l=r.DisplayManager;r.area=i;r.render=(function(){var t=0,u=5,v={};var a=function(x){var w=n.get(x);if(!w||n.getStyle(w,"display")=="none"){return}setTimeout(function(){(l.create("default",{area_config:{id:x},creativity_config:{fodder:[{type:"flash",resource_url:r.format("http://static.mttang.com/p/mttang/img/default{i}.swf",(t++%u)+1),cover:false,width:w.clientWidth,height:w.clientHeight}]}})).render()})};return function(x){if(v[x]){return}v[x]=true;var w=q[x];if(w){w.render()}else{a(x)}}})();r.ping=(function(){var u="http://adping.qq.com/p.jpg?oid={oid}&cid={cid}&loc={loc}",t=["oid","cid","loc"],a={},v=function(){d(t,function(w){a[w]=[]})};v();return{touch:b,append:function(w){d(a,function(y,x){y.push(w[x])});return this},flush:function(){b(r.format(u,a));v();return this}}})()})(FlexiBanner);(function(p){var f=p.each,r=p.map,n=p.DomUtil,g=n.get,l=p.DomEventUtil,o=13,c="http://static.mttang.com/p/mttang/img/db_close.gif",j='<div style="width:{width}px;height:{height}px;background-color:#eee;"><img src="{close_button_url}" style="border:none;float:right;cursor:pointer;width:13px;"></img></div>',s=p.DisplayHelper.render,b=function(){},k=function(a){var u=a.getElementsByTagName("object");if(u.length){var t=u[0];return function(w){try{t[w]()}catch(v){}}}else{return b}},m=function(t){var a=function(v,u){if(typeof v=="function"){v=v()}p.DisplayManager.reg(u,p.Class.create(v,t))};return function(u,v){if(arguments.length==1){f(u,a)}else{a(v,u)}}},i=m(p.PingDisplayBase),h=m(p.DisplayBase),q=function(t,a,u){if(a){t=p.buffer(t,a)}l.on(window,"scroll",t);l.on(window,"resize",t);if(u){t()}},e=function(t){var a=document.createElement("div");a.style.position="absolute";a.className="absolute";if(t){a.style.zIndex=t}document.body.insertBefore(a,document.body.firstChild);return a},d=function(t,a){setTimeout(function(){if(mutex_lock()==0){t()}else{setTimeout(arguments.callee,500)}},(a||0)*1000)};h({"default":{doRender:function(){s(this.getFodder(),g(this.area_config.id))}},popup:{doRender:function(){var v=this["creativity_config"],a=v.display_config,u=this.area_config.id,t=this.getFodder();if(a.focus_back&&/tencenttraveler|myie|maxthon|opera/i.test(navigator.userAgent)){return}setTimeout(function(){var w=window.open("http://static.mttang.com/p/mttang/img/a.html?"+p.serializeQuery(p.mix({loc:u,oid:v.oid,cid:v.cid},t)),"_blank",p.getObjectToStringFn("=",",",false,false)({menubar:"no",left:0,top:0,width:t.width,height:t.height}));if(w&&a.focus_back){w.blur();window.focus()}},a.delay*1000)}}});i({banner:{doRender:function(){s(this.getFodder(),g(this.area_config.id))}},float_fullscreen:{doRender:function(){var u=n.get(this.area_config.id),v=this.getFodder(),t=this.getDisplayConfig(),a=false;var w=function(){if(!a){n.hide(u);mutex_unlock();a=true}};d(function(){var y=document.createElement("div");s(v,y,true);var x=n.createElement(p.format(j,{width:v.width,height:o,close_button_url:c}));l.on(x.firstChild,"click",w);u.appendChild(x);u.appendChild(y);n.show(u);setTimeout(w,t.duration*1000)},t.delay)}},raw_fullscreen:{doRender:function(){var a=n.get(this.area_config.id),u=this.getFodder(),t=this.getDisplayConfig();d(function(){s(u,a);n.show(a);setTimeout(function(){n.hide(a);mutex_unlock()},t.duration*1000)},t.delay)}},"float":function(){var a=function(x,w){return function(y){return x(y,w)}},u={left:function(w,x){return n.getDocumentScrollLeft()+x},right:function(w,x){return n.getViewportWidth()+n.getDocumentScrollLeft()-w-x}},t={top:function(w,x){return n.getDocumentScrollTop()+x},middle:function(w,x){return(n.getViewportHeight()-w)/2+n.getDocumentScrollTop()},bottom:function(w,x){return n.getViewportHeight()+n.getDocumentScrollTop()-w-x}},v=function(D,C,z,M){var w=z.height,G=z.width,I=D[0],E=D[1],K=a(u[I],C.margin_h),F=a(t[E],C.margin_v),y=e(100),B=C.page_content_width,L=function(){return{left:K(G),top:F(w)}},A=new p.Anim(y,{duration:1,transition:function(N){return Math.pow(N,0.4)}});if(C.close_button!="none"){w+=o;var J=document.createElement("div");s(z,J,true);var H=n.createElement(p.format(j,{width:G,height:o,close_button_url:c}));l.on(H.firstChild,"click",M);if(C.close_button=="bottom"){y.appendChild(J);y.appendChild(H)}else{if(C.close_button=="top"){y.appendChild(H);y.appendChild(J)}}}else{s(z,y)}var x=function(){if((n.getViewportWidth()-B)/2<G+C.margin_h){n.hide(y);return false}n.show(y);return true};q(function(){if(!C.follow_viewport){return}if(!x()){return}var N=L();sxy=n.getXY(y),sx=sxy[0],sy=sxy[1],dy=N.top,from={},config={};if(E=="bottom"){if(sy>dy+w){from.top=n.getDocumentScrollTop()+n.getViewportHeight();config.duration=0.3}}else{if(E=="top"){if(sy<dy-w){from.top=n.getDocumentScrollTop()-w;config.duration=0.3}}}A.morph({from:from,to:N,config:config})},300,false);n.setStyle(y,L());x();return y};return{doRender:function(){var y=this.getDisplayConfig(),w=y.edges.split(","),z=this.getFodder(true);delete y.edges;var A=function(){f(x,n.hide);y.follow_viewport=false};var x=r(w,function(C,B){return v(C.split("-"),y,z[B],A)})}}},couplet:function(){var x=17,t=12,u=12,w=766,a=13,v="http://static.mttang.com/p/mttang/img/db_close.gif";return{doRender:function(){var y=this.getFodder(),z=false;var C=function(){B(false);z=true};var A=r(y,function(F){var E=e(100);n.setStyle(E,{top:x,width:F.width,height:F.height+a});s(F,E,false);var D=n.createElement(p.format(j,{width:F.width,height:o,close_button_url:c}));l.on(D.firstChild,"click",C);E.appendChild(D);return E});n.setStyle(A[0],{left:t});n.setStyle(A[1],{right:u});var B=function(D){f(A,function(E){n.setStyle(E,{display:D?"block":"none"})})};q(function(){if(!z){B(n.getViewportWidth()-t-y[0].width-y[1].width-u-w>0)}},100,true)}}},fullscreen:function(){var a=48,x=19,u=-8,t={position:"absolute",width:a+"px",height:x+"px",display:"none","background-image":"url(http://static.mttang.com/p/mttang/img/f_replay.gif)",cursor:"pointer"},w={position:"absolute",width:"19px",height:"19px",right:"7px",top:"7px","background-image":"url(http://static.mttang.com/p/mttang/img/f_close.gif)",cursor:"pointer"},v={"z-index":999,left:"-9999px",position:"absolute",border:"2px solid #ccc",opacity:0.5,filter:"alpha(opacity=50)"};return{doRender:function(){var A=n.get(this.area_config.id),C=this.getFodder(),G=this.getDisplayConfig(),y=G.show_duration,L=G.hide_duration,K=n.createElement(w,{"class":"absolute"}),D=n.createElement(t,{"class":"absolute"}),N;n.setStyle(A,{overflow:"hidden",height:0,position:"relative",display:"block"});var J=C.width,z=C.height,F=n.createElement(v);s(C,A);var B=k(A);var E=(function(){var O=new p.Anim(F,{callback:function(){n.setStyle(F,{left:-9999})}});return function(Q){n.setStyle(D,{display:""});var R=n.getXY(A),S=n.getXY(D);n.setStyle(D,{display:"none"});var P=[{left:R[0],top:R[1],width:J-4,height:z-4},{left:S[0],top:S[1],width:a-4,height:x-4}];if(!Q){O.morph({from:P[0],to:P[1],config:{duration:L}})}else{O.morph({from:P[1],to:P[0],config:{duration:y}})}}})();var H=(function(){var O=new p.Anim(A,{duration:L,callback:function(){n.setStyle(D,{display:"block"});mutex_unlock()}});return function(){clearTimeout(N);E(false);B("StopPlay");O.morph({to:{height:0}})}})();var M=(function(){var O=new p.Anim(A,{duration:y,callback:function(){B("Play");N=setTimeout(H,G.duration*1000)}});return function(){clearTimeout(N);n.setStyle(D,{display:"none"});E(true);B("Rewind");O.morph({to:{height:z}})}})();l.on(K,"click",H);l.on(D,"click",function(){I(false)});A.appendChild(K);document.body.insertBefore(D,document.body.firstChild);document.body.insertBefore(F,document.body.firstChild);q(function(){var O=n.getXY(A);n.setStyle(D,{left:O[0]+J-3,top:O[1]+u})},0,true);var I=function(O){if(O){d(M,0)}else{if(mutex_lock()==0){M()}}};setTimeout(function(){I(true)},G.delay*1000)}}}})})(FlexiBanner);(function(b){var c={string:function(a){return a},bool:function(a){if(a.toLowerCase()=="false"){return false}return true},number:function(a){return a-0}};b.getQueryData=function(d){var e={},a=location.href.indexOf("?");if(a!=-1){b.each(location.href.substring(a+1).split("&"),function(f){f=f.split("=");if(f[1]!=null){e[f[0]]=decodeURIComponent(f[1])}})}if(d){b.each(d,function(g,f){if(e[f]!=null){e[f]=c[g](e[f])}})}return e}})(FlexiBanner);